<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive 3D Animation Scene with A-Frame WebVR">
    <title>Interactive A-Frame Animation</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #info-panel {
            position: absolute;
            top: 50px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: Arial, sans-serif;
            z-index: 1000;
            max-width: 300px;
            pointer-events: none;
        }

        #info-panel h2,
        #info-panel p {
            pointer-events: none;
        }

        #toggle-info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255, 107, 107, 0.9);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            font-weight: bold;
            z-index: 1001;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #toggle-info:hover {
            background: rgba(255, 107, 107, 1);
            transform: scale(1.05);
        }

        #info-panel h2 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }

        #info-panel p {
            margin: 5px 0;
            font-size: 14px;
        }

        #info-panel kbd {
            background: #333;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }

        #about-panel {
            position: absolute;
            top: 50px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-family: Arial, sans-serif;
            z-index: 1000;
            max-width: 320px;
            pointer-events: none;
        }

        #about-panel h2,
        #about-panel p {
            pointer-events: none;
        }

        #toggle-about {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(78, 205, 196, 0.9);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            font-weight: bold;
            z-index: 1001;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #toggle-about:hover {
            background: rgba(78, 205, 196, 1);
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            #info-panel {
                display: none;
                max-width: 180px;
                padding: 10px;
                font-size: 12px;
                top: 60px;
            }

            #info-panel.visible {
                display: block;
            }

            #info-panel h2 {
                font-size: 14px;
            }

            #info-panel p {
                font-size: 11px;
            }

            #toggle-info {
                top: 20px;
                left: 10px;
                padding: 8px 12px;
                font-size: 12px;
            }

            #about-panel {
                display: none;
                top: 60px;
                right: 10px;
                left: 10px;
                max-width: none;
            }

            #about-panel.visible {
                display: block;
            }

            #toggle-about {
                top: 20px;
                right: 10px;
                padding: 8px 12px;
                font-size: 12px;
            }

            #back-button {
                bottom: auto;
                top: 50px;
                left: 50%;
                transform: translateX(-50%);
                padding: 8px 12px;
                font-size: 11px;
                border-radius: 8px;
                white-space: nowrap;
            }

            #fun-controls {
                bottom: 100px;
            }

            .modal-content {
                padding: 20px;
                margin: 15px;
            }

            .modal-content h2 {
                font-size: 20px;
            }

            .modal-content p {
                font-size: 14px;
            }

            .modal-btn {
                padding: 10px 20px;
                font-size: 13px;
            }
        }

        #about-panel h2 {
            margin: 0 0 10px 0;
            font-size: 18px;
            color: #4ECDC4;
        }

        #about-panel p {
            margin: 5px 0;
            font-size: 13px;
            line-height: 1.5;
        }

        #back-button {
            position: absolute;
            bottom: 70px;
            left: 20px;
            background: rgba(78, 205, 196, 0.9);
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-family: Arial, sans-serif;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        #back-button:hover {
            background: rgba(78, 205, 196, 1);
            transform: scale(1.05);
        }

        #exit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        #exit-modal.visible {
            display: flex;
        }

        .modal-content {
            background: rgba(40, 40, 40, 0.95);
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            max-width: 400px;
            margin: 20px;
        }

        .modal-content h2 {
            color: #4ECDC4;
            margin: 0 0 15px 0;
            font-size: 24px;
        }

        .modal-content p {
            color: white;
            margin: 0 0 25px 0;
            font-size: 16px;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn-yes {
            background: rgba(255, 107, 107, 0.9);
            color: white;
        }

        .modal-btn-yes:hover {
            background: rgba(255, 107, 107, 1);
            transform: scale(1.05);
        }

        .modal-btn-no {
            background: rgba(78, 205, 196, 0.9);
            color: white;
        }

        .modal-btn-no:hover {
            background: rgba(78, 205, 196, 1);
            transform: scale(1.05);
        }

        #fun-controls {
            position: absolute;
            bottom: 70px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .fun-button {
            background: rgba(255, 107, 107, 0.9);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-family: Arial, sans-serif;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .fun-button:hover {
            background: rgba(255, 107, 107, 1);
            transform: scale(1.05);
        }

        .fun-button:active {
            transform: scale(0.95);
        }

        @media (max-width: 768px) {
            #fun-controls {
                bottom: 60px;
                right: 10px;
                left: 10px;
                justify-content: center;
                flex-wrap: wrap;
            }

            .fun-button {
                padding: 8px 12px;
                font-size: 12px;
            }
        }

        #score-display {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(170, 150, 218, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            z-index: 1000;
            display: none;
        }

        #score-display.visible {
            display: block;
        }
    </style>
</head>

<body>
    <button id="toggle-info">üéÆ Controls</button>

    <div id="info-panel">
        <h2>Controls & Features</h2>
        <p><strong>Basic Controls:</strong></p>
        <p>üñ±Ô∏è Drag to look around</p>
        <p><kbd>WASD</kbd> to move (desktop)</p>
        <p>üì± Touch drag on mobile</p>

        <p><strong>Interactive:</strong></p>
        <p>üéØ Click/tap objects for points</p>
        <p>üéâ Party Mode - Speed up animations</p>
        <p>üöÄ Zero Gravity - Make objects float</p>
        <p>‚ûï Spawn Object - Add random shapes</p>

        <p><strong>Tips:</strong></p>
        <p>üí° Hover over objects for preview</p>
        <p>üîä Sound effects on interactions</p>
    </div>

    <button id="toggle-about">‚ÑπÔ∏è About</button>

    <div id="about-panel">
        <h2>About This Project</h2>
        <p>This interactive 3D animation scene was created as a class assignment to explore web-based animation techniques using A-Frame (WebVR framework).</p>
        <p>Features bouncing balls, rotating objects, particle effects, and interactive click events to demonstrate various animation principles and 3D web development skills.</p>
        <p><strong>‚ö†Ô∏è Warning:</strong> Party Mode contains rapid color changes and flashing effects that may not be suitable for individuals with photosensitive epilepsy.</p>
    </div>

    <div id="score-display">Score: 0</div>

    <div id="fun-controls">
        <button class="fun-button" id="party-mode">üéâ Party Mode</button>
        <button class="fun-button" id="gravity-toggle">üåç Toggle Gravity</button>
        <button class="fun-button" id="add-object">‚ûï Spawn Object</button>
    </div>

    <button id="back-button">‚Üê BTS</button>

    <div id="exit-modal">
        <div class="modal-content">
            <h2>Back to Showcase?</h2>
            <p>Are you sure you want to leave this animation scene and return to the main showcase?</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-yes" id="confirm-exit">Yes, Go Back</button>
                <button class="modal-btn modal-btn-no" id="cancel-exit">Stay Here</button>
            </div>
        </div>
    </div>

    <a-scene>
        <!-- Camera with look controls -->
        <a-entity id="camera-rig" position="0 1.6 0">
            <a-camera look-controls wasd-controls>
                <a-cursor color="#FF6B6B" fuse="true" fuse-timeout="1500"></a-cursor>
            </a-camera>
        </a-entity>

        <!-- Lighting -->
        <a-light type="ambient" color="#BBB" intensity="0.5"></a-light>
        <a-light type="directional" color="#FFF" intensity="0.8" position="2 4 -1"></a-light>
        <a-light type="point" color="#FF6B6B" intensity="1" position="0 3 -5"
            animation="property: position; to: 0 3 5; dur: 4000; dir: alternate; loop: true"></a-light>

        <!-- Animated Sphere (Bouncing Ball) -->
        <a-sphere
            id="bouncing-ball"
            position="0 2 -5"
            radius="0.5"
            color="#4ECDC4"
            metalness="0.6"
            roughness="0.2"
            shadow="cast: true; receive: false"
            animation="property: position; to: 0 0.5 -5; dur: 1000; easing: easeInOutQuad; dir: alternate; loop: true"
            animation__rotate="property: rotation; to: 0 360 0; dur: 2000; loop: true"
            animation__color="property: color; to: #FF6B6B; dur: 2000; dir: alternate; loop: true"
            class="clickable">
        </a-sphere>

        <!-- Rotating Cone -->
        <a-cone
            id="spinning-cone"
            color="#95E1D3"
            position="2 0.5 -3"
            radius-bottom="0.5"
            radius-top="0"
            height="1"
            metalness="0.4"
            roughness="0.3"
            shadow="cast: true; receive: false"
            animation="property: rotation; to: 0 360 0; dur: 3000; easing: linear; loop: true"
            animation__position="property: position; to: 2 1.5 -3; dur: 2000; dir: alternate; loop: true"
            class="clickable">
        </a-cone>

        <!-- Floating Cube -->
        <a-box
            id="floating-cube"
            position="-2 1 -3"
            rotation="45 45 45"
            color="#F38181"
            metalness="0.7"
            roughness="0.1"
            shadow="cast: true; receive: false"
            animation="property: position; to: -2 2 -3; dur: 1500; dir: alternate; loop: true; easing: easeInOutSine"
            animation__rotate="property: rotation; to: 405 405 405; dur: 4000; loop: true; easing: linear"
            class="clickable">
        </a-box>

        <!-- Pulsing Torus -->
        <a-torus
            id="pulsing-torus"
            position="0 1.5 -4"
            color="#AA96DA"
            radius="0.5"
            radius-tubular="0.1"
            metalness="0.8"
            roughness="0.2"
            shadow="cast: true; receive: false"
            animation="property: scale; to: 1.3 1.3 1.3; dur: 1000; dir: alternate; loop: true; easing: easeInOutQuad"
            animation__rotate="property: rotation; to: 360 360 0; dur: 5000; loop: true; easing: linear"
            class="clickable">
        </a-torus>

        <!-- Orbiting Cylinders -->
        <a-entity id="orbit-container" position="0 1 -5" rotation="0 0 0"
            animation="property: rotation; to: 0 360 0; dur: 8000; loop: true; easing: linear">
            <a-cylinder position="1.5 0 0" radius="0.15" height="0.8" color="#FCBAD3" metalness="0.5"></a-cylinder>
            <a-cylinder position="-1.5 0 0" radius="0.15" height="0.8" color="#FFFFD2" metalness="0.5"></a-cylinder>
            <a-cylinder position="0 0 1.5" radius="0.15" height="0.8" color="#A1FFCE" metalness="0.5"></a-cylinder>
            <a-cylinder position="0 0 -1.5" radius="0.15" height="0.8" color="#FFDCB8" metalness="0.5"></a-cylinder>
        </a-entity>

        <!-- Ground Plane -->
        <a-plane
            position="0 0 0"
            rotation="-90 0 0"
            width="20"
            height="20"
            color="#EAEAEA"
            shadow="receive: true"
            metalness="0.2"
            roughness="0.8">
        </a-plane>

        <!-- Animated Sky -->
        <a-sky
            color="#87CEEB"
            animation="property: color; to: #FFB6C1; dur: 10000; dir: alternate; loop: true">
        </a-sky>

        <!-- Particle-like entities -->
        <a-entity id="particles">
            <a-sphere position="3 2 -4" radius="0.1" color="#FFD700"
                animation="property: position; to: 3 3 -4; dur: 2000; dir: alternate; loop: true"></a-sphere>
            <a-sphere position="-3 2.5 -4" radius="0.1" color="#FFD700"
                animation="property: position; to: -3 3.5 -4; dur: 1800; dir: alternate; loop: true"></a-sphere>
            <a-sphere position="1.5 3 -6" radius="0.1" color="#FFD700"
                animation="property: position; to: 1.5 4 -6; dur: 2200; dir: alternate; loop: true"></a-sphere>
        </a-entity>
    </a-scene>

    <script>
        // Game state
        let score = 0;
        let partyModeActive = false;
        let gravityEnabled = true;
        let soundEnabled = true;

        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(frequency, duration, type = 'sine') {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            oscillator.frequency.value = frequency;
            oscillator.type = type;

            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        // Interactive click events
        document.addEventListener('DOMContentLoaded', function() {
            const clickableObjects = document.querySelectorAll('.clickable');
            const scoreDisplay = document.getElementById('score-display');
            const toggleInfoBtn = document.getElementById('toggle-info');
            const infoPanel = document.getElementById('info-panel');
            const toggleAboutBtn = document.getElementById('toggle-about');
            const aboutPanel = document.getElementById('about-panel');
            const partyModeBtn = document.getElementById('party-mode');
            const gravityToggleBtn = document.getElementById('gravity-toggle');
            const addObjectBtn = document.getElementById('add-object');
            const backButton = document.getElementById('back-button');
            const exitModal = document.getElementById('exit-modal');
            const confirmExitBtn = document.getElementById('confirm-exit');
            const cancelExitBtn = document.getElementById('cancel-exit');

            // Toggle info panel (mobile-friendly)
            toggleInfoBtn.addEventListener('click', function() {
                infoPanel.classList.toggle('visible');
                if (infoPanel.style.display === 'none' || infoPanel.style.display === '') {
                    infoPanel.style.display = 'block';
                } else {
                    infoPanel.style.display = 'none';
                }
            });

            // Toggle about panel (mobile-friendly)
            toggleAboutBtn.addEventListener('click', function() {
                aboutPanel.classList.toggle('visible');
                if (aboutPanel.style.display === 'none' || aboutPanel.style.display === '') {
                    aboutPanel.style.display = 'block';
                } else {
                    aboutPanel.style.display = 'none';
                }
            });

            // Hide panels on mobile by default
            if (window.innerWidth <= 768) {
                infoPanel.style.display = 'none';
                aboutPanel.style.display = 'none';
            }

            // Back button modal
            backButton.addEventListener('click', function() {
                exitModal.classList.add('visible');
                playSound(500, 0.1, 'sine');
            });

            confirmExitBtn.addEventListener('click', function() {
                playSound(600, 0.2, 'square');
                window.location.href = '../index.html';
            });

            cancelExitBtn.addEventListener('click', function() {
                exitModal.classList.remove('visible');
                playSound(400, 0.1, 'sine');
            });

            // Close modal when clicking outside
            exitModal.addEventListener('click', function(e) {
                if (e.target === exitModal) {
                    exitModal.classList.remove('visible');
                    playSound(400, 0.1, 'sine');
                }
            });

            clickableObjects.forEach(obj => {
                obj.addEventListener('click', function() {
                    // Random color on click
                    const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16);
                    this.setAttribute('color', randomColor);

                    // Trigger scale pulse
                    const currentScale = this.getAttribute('scale') || {x: 1, y: 1, z: 1};
                    this.setAttribute('animation__click', {
                        property: 'scale',
                        to: `${currentScale.x * 1.5} ${currentScale.y * 1.5} ${currentScale.z * 1.5}`,
                        dur: 300,
                        dir: 'alternate',
                        loop: 1
                    });

                    // Update score
                    score += 10;
                    scoreDisplay.textContent = `Score: ${score}`;
                    scoreDisplay.classList.add('visible');

                    // Play click sound
                    playSound(523.25 + Math.random() * 200, 0.1, 'sine');

                    console.log(`Clicked on ${this.id}`);
                });

                // Hover effect
                obj.addEventListener('mouseenter', function() {
                    this.setAttribute('animation__hover', {
                        property: 'scale',
                        to: '1.1 1.1 1.1',
                        dur: 200
                    });
                    playSound(440, 0.05, 'sine');
                });

                obj.addEventListener('mouseleave', function() {
                    this.setAttribute('animation__hover', {
                        property: 'scale',
                        to: '1 1 1',
                        dur: 200
                    });
                });
            });

            // Party Mode - Makes everything go crazy!
            partyModeBtn.addEventListener('click', function() {
                partyModeActive = !partyModeActive;
                playSound(800, 0.2, 'square');

                if (partyModeActive) {
                    this.textContent = 'üéä Party ON!';
                    this.style.background = 'rgba(170, 150, 218, 0.9)';

                    // Speed up all animations
                    document.querySelectorAll('[animation]').forEach(el => {
                        const anims = el.components;
                        Object.keys(anims).forEach(key => {
                            if (key.startsWith('animation')) {
                                const anim = el.getAttribute(key);
                                if (anim && anim.dur) {
                                    el.setAttribute(key, { ...anim, dur: anim.dur / 2 });
                                }
                            }
                        });
                    });

                    // Change sky rapidly
                    const sky = document.querySelector('a-sky');
                    sky.setAttribute('animation', {
                        property: 'color',
                        to: '#FF1493',
                        dur: 500,
                        dir: 'alternate',
                        loop: true
                    });
                } else {
                    this.textContent = 'üéâ Party Mode';
                    this.style.background = 'rgba(255, 107, 107, 0.9)';

                    // Reset animations - reload page for simplicity
                    location.reload();
                }
            });

            // Gravity Toggle - Makes objects float or fall
            gravityToggleBtn.addEventListener('click', function() {
                gravityEnabled = !gravityEnabled;
                playSound(300, 0.2, 'triangle');

                const clickableObjs = document.querySelectorAll('.clickable');

                if (!gravityEnabled) {
                    this.textContent = 'üöÄ Zero Gravity';
                    this.style.background = 'rgba(78, 205, 196, 0.9)';

                    clickableObjs.forEach(obj => {
                        const pos = obj.getAttribute('position');
                        obj.setAttribute('animation__antigravity', {
                            property: 'position',
                            to: `${pos.x} ${pos.y + 3} ${pos.z}`,
                            dur: 2000,
                            easing: 'easeOutQuad'
                        });
                    });
                } else {
                    this.textContent = 'üåç Toggle Gravity';
                    this.style.background = 'rgba(255, 107, 107, 0.9)';

                    clickableObjs.forEach(obj => {
                        obj.removeAttribute('animation__antigravity');
                    });
                }
            });

            // Add Random Object
            addObjectBtn.addEventListener('click', function() {
                playSound(600, 0.15, 'sawtooth');

                const scene = document.querySelector('a-scene');
                const shapes = ['a-sphere', 'a-box', 'a-cone', 'a-cylinder', 'a-torus'];
                const randomShape = shapes[Math.floor(Math.random() * shapes.length)];
                const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16);

                const newObj = document.createElement(randomShape);
                newObj.setAttribute('position', {
                    x: (Math.random() - 0.5) * 6,
                    y: Math.random() * 3 + 1,
                    z: -3 - Math.random() * 3
                });
                newObj.setAttribute('color', randomColor);
                newObj.setAttribute('metalness', 0.5);
                newObj.setAttribute('roughness', 0.3);
                newObj.setAttribute('shadow', 'cast: true');
                newObj.setAttribute('class', 'clickable');

                // Add animation
                newObj.setAttribute('animation', {
                    property: 'rotation',
                    to: '360 360 0',
                    dur: 3000,
                    loop: true,
                    easing: 'linear'
                });

                // Set size based on shape
                if (randomShape === 'a-sphere') {
                    newObj.setAttribute('radius', 0.3 + Math.random() * 0.3);
                } else if (randomShape === 'a-box') {
                    const size = 0.5 + Math.random() * 0.5;
                    newObj.setAttribute('width', size);
                    newObj.setAttribute('height', size);
                    newObj.setAttribute('depth', size);
                } else if (randomShape === 'a-torus') {
                    newObj.setAttribute('radius', 0.3 + Math.random() * 0.2);
                    newObj.setAttribute('radius-tubular', 0.05 + Math.random() * 0.05);
                }

                scene.appendChild(newObj);

                // Add click listener
                newObj.addEventListener('click', function() {
                    const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16);
                    this.setAttribute('color', randomColor);
                    score += 10;
                    scoreDisplay.textContent = `Score: ${score}`;
                    scoreDisplay.classList.add('visible');
                    playSound(523.25 + Math.random() * 200, 0.1, 'sine');
                });
            });

            // Log scene loaded
            const scene = document.querySelector('a-scene');
            scene.addEventListener('loaded', function() {
                console.log('üé® Interactive A-Frame scene loaded successfully!');
            });
        });
    </script>
</body>

</html>
